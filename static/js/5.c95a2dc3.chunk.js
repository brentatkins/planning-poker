(this["webpackJsonpplanning-poker"]=this["webpackJsonpplanning-poker"]||[]).push([[5],{374:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),i=a(11),c=a(48),l=a(102),s=a(363),u=a(376),m=a(103),d=a(371),p=a(360),b=a(359),g=a(361),f=a(212),E=a.n(f),h=a(332),v=a.n(h),O=a(339),j=a.n(O),k=a(341),C=a.n(k),y=a(346),w=a.n(y),S=a(349),T=a.n(S),D=a(32),A=a.n(D),N=a(52),x=a(373),H=a(356),_=a(55),B=a(357),F=a(362),I=a(358),J=a(364),L=a(375),P=function(e){function t(){return Object(_.a)(this,t),Object(F.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.startAutoHideTimeout()}},{key:"componentWillUnmount",value:function(){this.timeoutAutoHide&&clearTimeout(this.timeoutAutoHide)}},{key:"startAutoHideTimeout",value:function(){var e=this.props,t=e.duration,a=e.onClose;t&&(this.timeoutAutoHide=setTimeout((function(){a()}),1e3*t))}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.modal,n=e.position,o=e.full,i=Object(H.a)(e,["children","modal","position","full"]);return r.a.createElement(L.a,Object.assign({position:n||"top",full:o,modal:a,margin:"none",responsive:!0,plain:!a},i),t)}}]),t}(n.Component),U=a(17),z=function(e){var t=e.onClose,a=Object(n.useState)(""),s=Object(i.a)(a,2),u=s[0],d=s[1],p=Object(n.useContext)(U.a),b=Object(n.useContext)(o.a);function g(){return(g=Object(N.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.sessions().add({title:u,createdBy:b.planningPokerUsername,dateCreated:new Date});case 2:t();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(P,{position:"center",modal:!0},r.a.createElement(c.a,{align:"center"},r.a.createElement(c.a,{width:"medium",pad:"small",round:!1},r.a.createElement(l.a,{level:"4",margin:"small"},"Please enter a title"),r.a.createElement(x.a,{autoFocus:!0,placeholder:"type here",value:u,onChange:function(e){return d(e.target.value)}})),r.a.createElement(c.a,{width:"medium",margin:"none",direction:"row"},r.a.createElement(c.a,{basis:"1/2"},r.a.createElement(m.a,{plain:!0,color:"dark-1",onClick:function(){return g.apply(this,arguments)}},r.a.createElement(c.a,{pad:"small",align:"center",background:"status-ok"},"Ok"))),r.a.createElement(c.a,{basis:"1/2"},r.a.createElement(m.a,{plain:!0,color:"dark-1",onClick:t},r.a.createElement(c.a,{pad:"small",align:"center",background:"status-error"},"Cancel"))))))},M="1. Created in the last week",W="2. Created in the last 30 days",q="3. Older than 30 days",G=function(e){var t=e.dateCreated.toDate(),a=Object(g.a)(new Date,7);return Object(b.a)(t,a)?M:Object(b.a)(t,Object(g.a)(new Date,30))?W:q},K=function(e){var t=e.session,a=e.onNavigateToSession;return r.a.createElement(c.a,{background:"neutral-2",pad:"small",margin:{bottom:"small"},onClick:function(){return a(t.id)}},r.a.createElement(l.a,{level:"3",margin:"none"},t.title),r.a.createElement(s.a,{size:"xsmall"},"Created by ",t.createdBy," ",t.dateCreated&&"".concat(Object(p.a)(t.dateCreated.toDate(),new Date)," ago")))},Q=function(e){var t=e.onNavigateToSession,a=Object(n.useState)(!1),o=Object(i.a)(a,2),s=o[0],p=o[1],b=Object(U.c)("sessions"),g=b.collection,f=b.error;if(b.isLoading)return r.a.createElement(l.a,{level:"4"},"Loading...");if(f)return r.a.createElement(l.a,{level:"4"},"Error loading sessions");var h=w()(C()(G),T.a,v()((function(e){return Object(i.a)(e,1)[0]})),E()((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return[a,j()("dateCreated","desc")(n)]})))(g);return r.a.createElement(u.a,{align:"start",gap:"small"},r.a.createElement(c.a,{align:"start",height:{min:"auto"},className:"brent"},r.a.createElement(m.a,{icon:r.a.createElement(d.a,null),label:"Create New Session",onClick:function(){return p(!0)},color:"accent-4",primary:!0})),h.map((function(e){var a=Object(i.a)(e,2),n=a[0],o=a[1];return r.a.createElement(r.a.Fragment,{key:"group_".concat(n)},r.a.createElement(l.a,{level:"5",margin:"none"},n),r.a.createElement(c.a,{wrap:!0,gap:"small",direction:"row"},o.map((function(e){return r.a.createElement(K,{key:"grouped_sessionlist_".concat(e.id),session:e,onNavigateToSession:t})}))))})),s&&r.a.createElement(z,{onClose:function(){return p(!1)}}))},R=a(53),V=a(12);t.default=function(e){var t=e.history;return Object(o.d)(o.b.userIsSignedIn,t),r.a.createElement(R.a,{title:"All Sessions"},r.a.createElement(Q,{onNavigateToSession:function(e){t.push(V.d(e))}}))}}}]);
//# sourceMappingURL=5.c95a2dc3.chunk.js.map