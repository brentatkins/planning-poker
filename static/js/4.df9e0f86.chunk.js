(this["webpackJsonpplanning-poker"]=this["webpackJsonpplanning-poker"]||[]).push([[4],{363:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(1),o=n(4),l=n(72),c=n(8),s={center:"center",end:"right",start:"left"},u=Object(i.css)(["text-align:",";"],(function(e){return s[e.textAlign]})),m=Object(i.css)(["color:",";"],(function(e){return Object(o.c)(e.colorProp,e.theme)})),f=Object(i.css)(["font-weight:",";"],(function(e){return e.weight})),p=Object(i.css)(["word-break:",";"],(function(e){return e.wordBreak})),h=i.default.span.withConfig({displayName:"StyledText",componentId:"sc-1sadyjn-0"})([""," "," "," "," "," "," "," ",""],l.f,(function(e){return function(e){var t=e.size||"medium",n=e.theme.text[t];return n?Object(i.css)(["font-size:",";line-height:",";"],n.size,n.height):Object(i.css)(["font-size:",";line-height:normal;"],t)}(e)}),(function(e){return e.textAlign&&u}),(function(e){return e.truncate&&"\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"}),(function(e){return e.colorProp&&m}),(function(e){return e.weight&&f}),(function(e){return e.wordBreak&&p}),(function(e){return e.theme.text&&e.theme.text.extend}));function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}h.defaultProps={},Object.setPrototypeOf(h.defaultProps,c.a),n.d(t,"a",(function(){return v}));var g=function(e){var t=e.color,n=e.tag,r=e.as,i=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["color","tag","as"]);return a.a.createElement(h,d({as:!r&&n?n:r,colorProp:t},i))};g.defaultProps={level:1};var v=g},372:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(48),o=n(53),l=n(31),c=n(17),s=n(27),u=n(102),m=n(1),f=n(4),p=n(72),h=n(8),d=Object(m.css)(["color:",";"],(function(e){return Object(f.c)(e.colorProp,e.theme)})),g={center:"center",end:"right",start:"left"},v=Object(m.css)(["text-align:",";"],(function(e){return g[e.textAlign]})),b=m.default.p.withConfig({displayName:"StyledParagraph",componentId:"tbetod-0"})([""," "," "," "," ",""],p.f,(function(e){return function(e){var t=e.size||"medium",n=e.theme.paragraph[t];return Object(m.css)(["font-size:",";line-height:",";max-width:",";"],n.size,n.height,e.fillProp?"none":n.maxWidth)}(e)}),(function(e){return e.textAlign&&v}),(function(e){return e.colorProp&&d}),(function(e){return e.theme.paragraph&&e.theme.paragraph.extend}));function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}b.defaultProps={},Object.setPrototypeOf(b.defaultProps,h.a);var E=function(e){var t=e.color,n=e.fill,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["color","fill"]);return a.a.createElement(b,y({colorProp:t,fillProp:n},r))},O=n(363),w=n(103),j=n(26);function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){return"horizontal"===e?"width":"height"},P=Object(m.default)(i.a).withConfig({displayName:"Collapsible__AnimatedBox",componentId:"sc-15kniua-0"})(["",";"],(function(e){return!e.animate&&(e.open?"\n    max-"+C(e.collapsibleDirection)+": unset;\n    visibility: visible;\n  ":"\n    max-"+C(e.collapsibleDirection)+": 0;\n    visibility: hidden;\n    overflow: hidden;\n  ")})),z=function(e){var t,n;function i(t,n){var a;return k(x(a=e.call(this,t,n)||this),"ref",Object(r.createRef)()),k(x(a),"getSnapshotBeforeUpdate",(function(){return a.ref.current&&a.ref.current.getBoundingClientRect()})),a.state={open:t.open,animate:!1},a}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.getDerivedStateFromProps=function(e,t){var n=e.open;return n!==t.open?{animate:!0,open:n}:null};var o=i.prototype;return o.componentDidUpdate=function(e,t,n){var r=this,a=this.props,i=a.direction,o=a.theme.collapsible,l=o.minSpeed,c=o.baseline,s=this.state,u=s.animate,m=s.open,f=this.ref.current;if(f){var p=C(i),h=f.getBoundingClientRect()[p],d=u&&t.open!==m;if(m&&n[p]&&h!==n[p]&&(d=!0),d){this.animationTimeout&&clearTimeout(this.animationTimeout);var g=Math.max(h/c*l,l);f.style["max-"+p]=n[p]+"px",f.style.overflow="hidden",requestAnimationFrame((function(){requestAnimationFrame((function(){f.style.transition="max-"+p+" "+g+"ms, visibility 50ms",f.style["max-"+p]=m?h+"px":"0px",r.animationTimeout=setTimeout((function(){f.removeAttribute("style"),r.setState({animate:!1})}),g)}))}))}}},o.componentWillUnmount=function(){this.animationTimeout&&clearTimeout(this.animationTimeout)},o.render=function(){var e=this.props,t=e.children,n=e.direction,r=this.state,i=r.animate,o=r.open;return a.a.createElement(P,{"aria-hidden":!o,ref:this.ref,open:o,animate:i,collapsibleDirection:n},t)},i}(r.Component);z.defaultProps={},Object.setPrototypeOf(z.defaultProps,h.a);var L=Object(j.a)(m.withTheme)(z),T=n(49);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var M=function(e){return a.a.createElement(T.a,S({viewBox:"0 0 24 24",a11yTitle:"Unlink"},e),a.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M17,11 L21.5856815,15.5856815 C22.366788,16.366788 22.3692352,17.6307648 21.5856815,18.4143185 L18.4143185,21.5856815 C17.633212,22.366788 16.3692352,22.3692352 15.5856815,21.5856815 L11,17 M17,8 L21,8 M16,7 L16,3 M8,21 L8,17 M3,16 L7,16 M7,13 L2.4143185,8.4143185 C1.63321196,7.63321196 1.63076481,6.36923519 2.4143185,5.5856815 L5.5856815,2.4143185 C6.36678804,1.63321196 7.63076481,1.63076481 8.4143185,2.4143185 L13,7"}))};function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var B=function(e){return a.a.createElement(T.a,U({viewBox:"0 0 24 24",a11yTitle:"Link"},e),a.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M16.1251884,2.42026615 C16.9095797,1.63587482 18.1818354,1.63638083 18.9643331,2.41887857 L21.5811214,5.03566688 C22.3647464,5.81929188 22.3723943,7.08215115 21.5797338,7.87481161 L17.8748116,11.5797338 C17.0904203,12.3641252 15.8181646,12.3636192 15.0356669,11.5811214 L12.4188786,8.96433312 C11.6352536,8.18070812 11.6276057,6.91784885 12.4202662,6.12518839 L16.1251884,2.42026615 Z M6.12518839,12.4202662 C6.90957973,11.6358748 8.18183538,11.6363808 8.96433312,12.4188786 L11.5811214,15.0356669 C12.3647464,15.8192919 12.3723943,17.0821512 11.5797338,17.8748116 L7.87481161,21.5797338 C7.09042027,22.3641252 5.81816462,22.3636192 5.03566688,21.5811214 L2.41887857,18.9643331 C1.63525357,18.1807081 1.6276057,16.9178488 2.42026615,16.1251884 L6.12518839,12.4202662 Z M7,17 L17,7"}))},F=n(32),_=n.n(F),A=n(52),V=n(11),R={baseUrl:"https://api.giphy.com/v1/gifs",apiKey:"MSPhGlR0y5PGlVYh1Ab2jV0bvc7VmBbQ"},I=function(e){var t=e.searchTerm,n=e.refreshPeriod,i=Object(r.useState)(null),o=Object(V.a)(i,2),l=o[0],c=o[1],s=Object(r.useState)(0),u=Object(V.a)(s,2),m=u[0],f=u[1];return function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){f(m+1)}),n),Object(r.useEffect)((function(){function e(){return(e=Object(A.a)(_.a.mark((function e(){var n,r,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(R.baseUrl,"/random?api_key=").concat(R.apiKey,"&tag=").concat(t,"&rating=pg"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent,c(a.data.image_url);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,m]),l&&a.a.createElement("img",{src:l,style:{maxWidth:"100%",maxHeight:"100%"},alt:"giphy",className:"img-thumbnail"})},W=[1,2,3,5,8,13],N=function(e){if(!e||0===e.length)return null;var t=e.reduce((function(e,t){return e+t}),0)/e.length;return W.includes(t)?t:W.find((function(e){return e>t}))};var Z=function(e){var t=e.session,n=Object(r.useContext)(c.a),o=Object(r.useContext)(l.a),m=t.users&&t.users.includes(o.planningPokerUsername),f=t.votes&&t.votes[o.planningPokerUsername];return a.a.createElement(i.a,{align:"start",gap:"small",background:"neutral-3",pad:"small"},a.a.createElement(u.a,{level:"2",margin:"none",size:"small"},"Your vote"),m&&!f&&a.a.createElement(E,null,"You have not voted on this issue yet. Please do so by clicking one of the estimates below"),m&&f&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{fill:"horizontal",align:"center",height:{min:"94px"}},a.a.createElement(O.a,{color:"status-warning",size:"80px",weight:"bold"},f)),a.a.createElement(E,null,"You may change your vote by clicking another estimate below")),m&&a.a.createElement(i.a,{gap:"xxsmall",direction:"row",height:{min:"36px"}},W.map((function(e){return a.a.createElement(w.a,{key:"estimate_".concat(e),label:e,disabled:f===e,onClick:function(){return r=e,void n.session(t.id).update(Object(s.a)({},"votes.".concat(o.planningPokerUsername),r));var r}})}))),m?a.a.createElement(a.a.Fragment,null,a.a.createElement(E,{size:"small"},"To remove your vote and leave the session click below"),a.a.createElement(w.a,{color:"accent-3",label:"Leave",onClick:function(){n.session(t.id).update(Object(s.a)({users:n.firestore.FieldValue.arrayRemove(o.planningPokerUsername)},"votes.".concat(o.planningPokerUsername),n.firestore.FieldValue.delete()))},icon:a.a.createElement(M,null)})):a.a.createElement(a.a.Fragment,null,a.a.createElement(E,null,"You need to join the session before you may cast a vote. Join by clicking below"),a.a.createElement(w.a,{primary:!0,label:"Join",onClick:function(){n.session(t.id).update({users:n.firestore.FieldValue.arrayUnion(o.planningPokerUsername)})},icon:a.a.createElement(B,null)})),a.a.createElement(L,{direction:"vertical",open:m&&f&&!t.reveal},a.a.createElement(i.a,{margin:{top:"small"}},a.a.createElement(E,{size:"small"},"Thanks for voing. Now we have to wait for the results to be revealed"),a.a.createElement(i.a,{margin:"none",height:{min:"192px"}},a.a.createElement(I,{searchTerm:"bored",refreshPeriod:5e3})))))};var D=function(e){var t=e.session,n=Object(r.useContext)(l.a);return a.a.createElement(i.a,{align:"start",gap:"small",background:"neutral-4",pad:"small"},a.a.createElement(u.a,{level:"2",margin:"none",size:"small"},"All Votes"),a.a.createElement(E,null,"Voting results will appear below for each user"),a.a.createElement(i.a,{direction:"row",gap:"small",wrap:!0},t.users&&t.users.map((function(e){var r=function(e){return t.votes&&t.votes[e]}(e),o=e===n.planningPokerUsername?{size:"xsmall",style:"dashed"}:{color:"accent-3",size:"xsmall"};return a.a.createElement(i.a,{key:"session_user_".concat(e),direction:"row",border:o,margin:{bottom:"small"}},a.a.createElement(i.a,{pad:"xsmall"},a.a.createElement(O.a,{size:"large"},e)),a.a.createElement(i.a,{pad:"xxsmall",justify:"center",width:"xxsmall",align:"center"},a.a.createElement(O.a,{size:"large",weight:"bold",color:"status-warning"},r&&t.reveal&&r,r&&!t.reveal&&a.a.createElement("span",{role:"img","aria-label":"waiting"},"\ud83e\udd10"),!r&&a.a.createElement("span",{role:"img","aria-label":"waiting"},"\ud83e\udd37"))))}))))};function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var J=function(e){return a.a.createElement(T.a,Y({viewBox:"0 0 24 24",a11yTitle:"Hide"},e),a.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M12,17 C9.27272727,17 6,14.2222222 6,12 C6,9.77777778 9.27272727,7 12,7 C14.7272727,7 18,9.77777778 18,12 C18,14.2222222 14.7272727,17 12,17 Z M11,12 C11,12.55225 11.44775,13 12,13 C12.55225,13 13,12.55225 13,12 C13,11.44775 12.55225,11 12,11 C11.44775,11 11,11.44775 11,12 Z M20,5 L4,19"}))};function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q=function(e){return a.a.createElement(T.a,H({viewBox:"0 0 24 24",a11yTitle:"FormView"},e),a.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M12,17 C9.27272727,17 6,14.2222222 6,12 C6,9.77777778 9.27272727,7 12,7 C14.7272727,7 18,9.77777778 18,12 C18,14.2222222 14.7272727,17 12,17 Z M11,12 C11,12.55225 11.44775,13 12,13 C12.55225,13 13,12.55225 13,12 C13,11.44775 12.55225,11 12,11 C11.44775,11 11,11.44775 11,12 Z"}))};function G(){var e,t,n=(e=["\n  transition: ","; // only apply transition when changing from blurred to not blurred\n  transition-timing-function: ease-in;\n  filter: blur(\n    ","px\n  );\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return G=function(){return n},n}var K=Object(m.default)(O.a)(G(),(function(e){return 0!==e.blurSize?"none":"filter 1s"}),(function(e){return!1!==e.blurSize&&e.blurSize>=0?e.blurSize:15}));var Q=function(e){var t=e.session,n=Object(r.useContext)(c.a),o=Object.entries(t.votes).length>0,l=N(Object.values(t.votes));return a.a.createElement(i.a,{align:"start",gap:"small",background:"neutral-1",pad:"small"},a.a.createElement(u.a,{level:"2",margin:"none",size:"small"},"Results"),!o&&a.a.createElement(E,null,"Notes votes yet"),o&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{fill:"horizontal",align:"center"},a.a.createElement(K,{blurSize:t.reveal&&0,color:"status-warning",size:"80px",weight:"bold"},t.reveal?l:"9")),a.a.createElement(i.a,{margin:{top:"medium",bottom:"small"}},a.a.createElement(w.a,{onClick:function(){var e=!t.reveal;n.session(t.id).update({reveal:e})},label:t.reveal?"Hide":"Show",icon:t.reveal?a.a.createElement(J,null):a.a.createElement(q,null)}))))};t.default=function(e){var t=e.history,n=e.match.params.id;Object(l.d)(l.b.userIsSignedIn,t);var r=Object(c.d)("sessions/".concat(n)),s=r.doc,u=r.isLoading,m=r.error,f=s?"Session: ".concat(s.title):u?"Loading...":m?"Error":"";return a.a.createElement(o.a,{title:f},s&&a.a.createElement(i.a,{fill:"horizontal",direction:"row",gap:"small"},a.a.createElement(i.a,{width:{min:"400px",max:"400px"}},a.a.createElement(Z,{session:s})),a.a.createElement(i.a,{fill:"horizontal"},a.a.createElement(D,{session:s})),a.a.createElement(i.a,{width:{min:"400px",max:"400px"}},a.a.createElement(Q,{session:s}))))}}}]);
//# sourceMappingURL=4.df9e0f86.chunk.js.map